{% extends "base.html" %}

{% block css %}
<style>
.status {
    padding: 4px 8px;
    border-radius: 4px;
    font-size: 12px;
    font-weight: bold;
}

.status.active {
    background-color: #d4edda;
    color: #155724;
}

.status.inactive {
    background-color: #f8d7da;
    color: #721c24;
}

.inactive-item {
    opacity: 0.6;
}

/* Style for small texts */
small {
    color: #666;
    font-size: 12px;
    display: block;
    margin-top: 4px;
}
</style>
{% endblock %}

{% block content %}
<a style="float:right; font-size:30px" href="/config">⚙️</a>
<h1>MQTT Display</h1>

<!-- Items list -->
 <h2>DisplayItems List</h2>
<div>
    
    <table class="table">
        <thead>
            <tr>
                <th style="display: none;">ID</th>
                <th>Label</th>
                <th>Topic</th>
                <th>Render Template</th>
                <th>Duration</th>
                <th>Order</th>
                <th>Status</th>
                <th>Actions</th>
            </tr>
        </thead>
        <tbody id="items-table-body">
            <!-- Items will be added here by JavaScript -->
        </tbody>
    </table>
</div>

<!-- Messages -->
<div id="messages"></div>
<h2 id="form-title">Add DisplayItem</h2>
<!-- Form -->
<div class="form-section">
    
    <form id="item-form">
        <input type="hidden" id="item-id" name="id">
        
        <div class="form-group">
            <label for="name">Label (max 32 characters):</label>
            <input type="text" id="name" name="name" maxlength="32" required>
            <div class="error" id="name-error"></div>
        </div>
        
        <div class="form-group">
            <label for="mqtt_topic">MQTT Topic:</label>
            <input type="text" id="mqtt_topic" name="mqtt_topic" required>
            <div class="error" id="mqtt_topic-error"></div>
        </div>
        
        <div class="form-group">
            <label for="render_template">Render Template:</label>
            <input type="text" id="render_template" name="render_template" required>
            <div class="error" id="render_template-error"></div>
        </div>
        
        <div class="form-group">
            <label for="duration">Duration (in seconds):</label>
            <input type="number" id="duration" name="duration" min="1" required>
            <div class="error" id="duration-error"></div>
        </div>
        
        <!-- New display_order field -->
        <div class="form-group">
            <label for="display_order">Display order:</label>
            <input type="number" id="display_order" name="display_order" min="0" value="0">
            <div class="error" id="display_order-error"></div>
            <small>The lower the number, the earlier the item will be displayed</small>
        </div>
        
        <!-- New is_active field -->
        <div class="form-group">
            <label for="is_active">
                <input type="checkbox" id="is_active" name="is_active" checked>
                Active
            </label>
            <div class="error" id="is_active-error"></div>
            <small>Uncheck to temporarily disable this item</small>
        </div>
        
        <button type="submit" class="btn btn-primary" id="submit-btn">Add</button>
        <button type="button" class="btn btn-secondary" id="cancel-btn" onclick="cancelEdit()">Cancel</button>
    </form>
</div>
{% endblock %}

{% block scripts %}
<script src="{{ url_for('static', filename='display_items.js') }}"></script>
{% endblock %}
